import{u as x,O as F,P as O,G as T,D as P,d as R,S as D,F as M,T as V,t as j}from"./useThree.3ef42ea4.js";import{u as G}from"./useThreeSelect.b7cdba79.js";import{b6 as I,aR as N,C as H,b7 as q,aE as U,B as Z,aA as d}from"./three.module.e25001cb.js";import{u as $,_ as z}from"./useObjResManage.fa2ca442.js";import{V as J}from"./VFixed.bc07aeec.js";import{d as K,f as Q,o as W,c as X,A as l,M as Y,F as ee,a as u,g as i,I as te}from"./index.3afbc751.js";const oe=u("div",{id:"three"},null,-1),ne=u("div",{id:"stats"},null,-1),ue=K({setup(ae){function f({object:e}){const{y:o}=e.rotation;j({y:o},{y:o+Math.PI},({y:n})=>{e.rotation.y=n})}function m(e){!e.length||e.forEach(f)}function p(){let e=()=>{};return[()=>{const n=new M(t.camera);n.movementSpeed=1,n.lookSpeed=.1,n.lookAt(0,0,0);const a=new d;function s(){n.update(a.getDelta())}e=t.renderEffectStore.addEffects(s),t.loopRender()},e]}function b(){let e=()=>{};function o(){const n=new V(t.camera,t.dom);function a(){n.update()}e=t.renderEffectStore.addEffects(a),t.loopRender()}return[o,e]}function c(){const e=new F(t.camera,t.dom);e.target.set(0,.5,0),e.update(),e.enablePan=!1,e.enableDamping=!0,e.addEventListener("change",()=>{if(r.value!=="orbit"){e.enabled=!1,e.dispose();return}window.requestAnimationFrame(e.update)})}function w(){const e=new O(t.camera,document.body);e.addEventListener("lock",function(){}),e.addEventListener("unlock",function(){}),t.add(e.getObject()),t.render(),e.lock()}function C(){const e=new T,o=new P;o.setDecoderPath("/three/gltf/"),e.setDRACOLoader(o),e.load("/LittlestTokyo.glb",function(n){const a=n.scene;a.position.set(1,1,0),a.scale.set(.05,.05,.05),t.add(a);const s=new q(a);s.clipAction(n.animations[0]).play();const _=new d;t.renderEffectStore.addEffects(()=>{const S=_.getDelta();s.update(S)})})}function g(){const o=R(new U({wireframe:!1}))(new Z(5,10,20));o.position.setZ(-20),A(o),t.add(o)}function h(){const e=D();return t.renderEffectStore.addEffects(()=>e.update()),e}const[k,E]=p(),[v,y]=b(),t=x(),{addIntersectObj:A}=G(t.camera,m);function B(){return{orbit:c,first:k,traceBall:v,pointerLock:w}}const[r,L]=$(B(),e=>{E(),y(),e()},"orbit");return Q(()=>{var n;c(),C(),g();const{dom:e}=h();(n=document.getElementById("stats"))==null||n.appendChild(e),t.add(new I(30));const o=new N(new H(16777215),1);o.position.set(0,0,0),o.lookAt(0,0,0),t.add(o),t.mount(),t.loopRender()}),(e,o)=>(W(),X(ee,null,[oe,l(J,null,{default:Y(()=>[l(z,{options:i(L),modelValue:i(r),"onUpdate:modelValue":o[0]||(o[0]=n=>te(r)?r.value=n:null)},null,8,["options","modelValue"]),ne]),_:1})],64))}});export{ue as default};
